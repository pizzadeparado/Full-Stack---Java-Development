<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Salvo | Game List</title>
  <link rel="stylesheet" href="css/games.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.typekit.net/ize1xyw.css">
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Space+Mono:400&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Condensed&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bungee|Bungee+Shade&display=swap">
</head>

<body>
<div class="container" id="app">

  <div class="container-fluid mb-5" id="playerAccess">

    <div class="row m-5">
      <span class="container text-center" id="title">Salvo - Game On!</span>
    </div>

    <div class="row">
      <div class="col-sm-4 mb-5 text-center" id="signUp">
        <div class="card shadow-lg rounded p-5">
          <h3>Sign Up</h3>
          <button class="btn btn-info m-3" type="button" data-toggle="collapse" data-target="#registrationCollapse" aria-expanded="false" aria-controls="registrationCollapse">Register</button>
          <div class="collapse" id="registrationCollapse">
            <form id="registration">
              <div class="form-group mb-4">
                <input type="email" class="form-control" id="registrationEmail" aria-describedby="emailHelp" placeholder="Email">
              </div>
              <div class="form-group mb-4">
                <input type="password" class="form-control" id="registrationPassword" placeholder="Password">
              </div>
              <button class="btn btn-outline-info" type="button" onclick="post()">Continue</button>
            </form>
          </div>
        </div>
      </div>

      <div class="col-sm-4 mb-5 text-center" id="logIn">
        <div class="card shadow-lg rounded p-5">
          <h3 v-show="vueGames == 'guest'">Log In</h3>
          <h3 v-show="vueGames.player !== 'guest'">Welcome {{ vueGames.user }}</h3>
          <button class="btn btn-success m-3" type="button" data-toggle="collapse"
                  data-target="#loginCollapse" aria-expanded="false" aria-controls="loginCollapse" v-show="vueGames == 'guest'">Press to Continue</button>
          <div class="collapse" id="loginCollapse">
            <form id="login-form"v-show="vueGames == 'guest'">
              <div class="form-group mb-4">
                <input type="email" class="form-control" id="loginEmail" aria-describedby="emailHelp" placeholder="Email">
              </div>
              <div class="form-group mb-4">
                <input type="password" class="form-control" id="loginPassword" placeholder="Password">
              </div>

              <button class="btn btn-success mr-3" type="button" onclick="login()"
                      v-show="vueGames == 'guest'">Log In</button>
              <button class="btn btn-danger ml-3" type="button" onclick="logout()"
                      v-show="vueGames !== 'guest'">Log Out</button>

            </form>
          </div>
        </div>
      </div>

      <div class="col-sm-4 mb-5 text-center" id="startGame">
        <div class="card shadow-lg rounded p-5">
          <h3>Start Game</h3>
          <p v-show="vueGames.player == 'guest'">You need to log in before starting a new game.</p>
          <button class="btn btn-warning m-3" type="button" onclick="createGame()"
                  v-show="vueGames.player !== 'guest'">Ready,
            set, go!</button>
        </div>
      </div>
    </div>

  </div>

  <div class="container mb-5" id="info">
    <div class="row">

      <div class="col" id="gamesTable">
        <h4>Game List</h4>
        <table class="table table-hover shadow">
          <thead class="thead-dark">
          <tr>
            <th class="text-center">ID</th>
            <!--<th>Date</th>-->
            <th>Player 1</th>
            <th>Player 2</th>
            <th>Join</th>
          </tr>
          </thead>

          <tbody>
          <tr v-for="(game, index) in vueGames">
            <td class="text-center">{{game.gameID}}</td>
            <!--<td>{{game.created}}</td>-->
            <td>{{game.player[0].user}}</td>
            <td>{{game.player[1].user}}</td>
            <td v-if="currentUser != 'guest' && currentUser != game.player[0].user">
              <button type="button" class="btn btn-warning btn-sm" onclick="joinGame(game.player[0].playerID)">Join Game</button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>

      <div class="col" id="leaderboardTable">
        <h4>Leaderboard</h4>
        <table class="table table-hover shadow">
          <thead class="thead-dark">
          <tr>
            <th>Player</th>
            <th class="text-center">Won</th>
            <th class="text-center">Tied</th>
            <th class="text-center">Lost</th>
            <th class="text-center">Total</th>
          </tr>
          </thead>

          <tbody>
          <tr v-for="player in vueScore">
            <td>{{player.user}}</td>
            <td class="text-center">{{player.won}}</td>
            <td class="text-center">{{player.tied}}</td>
            <td class="text-center">{{player.lost}}</td>
            <td class="text-center">{{player.total}}</td>
          </tr>
          </tbody>
        </table>
      </div>

    </div>
  </div>

</div>

<footer class="footer mt-auto py-3 bg-dark">
  <div class="container">
    <span class="text-muted">Created with ðŸ’š by <a href="https://github.com/pizzadeparado">pizzadeparado</a> in Buenos Aires.</span>
  </div>
</footer>

<!--jquery-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
<!--popper-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<!--bootstrap-->
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<!--vue js-->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<!-- react js -->
<!-- Note: when deploying, replace "development.js" with "production.min.js". -->
<script src="https://unpkg.com/react@16/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js" crossorigin></script>
<!-- react component -->
<script src=""></script>
<!--content scripts-->
<script src="js/games.js"></script>

</body>
</html>